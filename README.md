![CongressMCPServer](assets/logo.svg)

# Congress.gov API MCP Server

This is a Model Context Protocol (MCP) server designed to provide access to the official Congress.gov API (v3) using a hybrid approach:

- **MCP Resources:** For direct lookups of core legislative entities (Bills, Members, Congresses, Committees, general Info) using standardized URIs.
- **MCP Tools:** For more complex operations like searching across collections (`congress_search`) and retrieving related data lists (`congress_getSubResource`).

This server acts as a bridge, allowing MCP clients (like AI assistants or development tools) to easily query and utilize U.S. legislative data.

## Project Structure

- `/src`: Contains all source code.
  - `/config`: Configuration management (`ConfigurationManager.ts`).
  - `/services`: Core logic for interacting with Congress.gov API (`CongressApiService.ts`, `RateLimitService.ts`).
  - `/tools`: MCP tool definitions (`search/`, `subresource/`, `index.ts`).
  - `/types`: TypeScript interfaces and Zod schemas.
  - `/utils`: Shared utility functions (logging, errors, etc.).
  - `resourceHandlers.ts`: Logic for handling core entity resource requests.
  - `createServer.ts`: Server instance creation, resource and tool registration.
  - `server.ts`: Main application entry point.
- `/dist`: Compiled JavaScript output (generated by `npm run build`).
- `/docs`: Project documentation (PRD, Feature Spec, RFCs).
- `package.json`: Project metadata and dependencies.
- `tsconfig.json`: TypeScript compiler options.
- `.eslintrc.json`, `.prettierrc.json`: Linting and formatting rules.
- `.env`: (Not committed) For storing `CONGRESS_GOV_API_KEY`.

## Getting Started

1. **Install Dependencies:**

   ```bash
   npm install
   ```

2. **Set API Key:** Create a `.env` file in the project root and add your Congress.gov API key:

   ```
   CONGRESS_GOV_API_KEY=YOUR_API_KEY_HERE
   ```

   (Get a key from [https://api.data.gov/signup/](https://api.data.gov/signup/))

3. **Build the Server:**

   ```bash
   npm run build
   ```

4. **Run the Server:**

   ```bash
   npm start
   ```

   (This runs `node dist/server.js` with Streamable HTTP transport)

   The server will start on port 3000 by default. You can set a custom port using the `PORT` environment variable:

   ```bash
   PORT=8080 npm start
   ```

Alternatively, run in development mode using `npm run dev` (uses `ts-node` and `nodemon`).

## Usage with MCP Client

The server now uses **Streamable HTTP transport** instead of stdio. Connect your MCP client to:

- **SSE Endpoint (for client connection):** `http://localhost:3000/sse`
- **Message Endpoint (for sending messages):** `http://localhost:3000/message`

This implements the [MCP Streamable HTTP specification](https://modelcontextprotocol.io/specification/2025-06-18/basic/transports#streamable-http) using Server-Sent Events (SSE) for server-to-client communication and HTTP POST for client-to-server communication.

### Accessing Resources

Use the `access_mcp_resource` command/method with the appropriate URI.

## Available Resources

### Core Legislative Resources

#### Bills and Bill Subresources

- **Bill Details:** `congress-gov://bill/{congress}/{billType}/{billNumber}`
- **Bill Actions:** `congress-gov://bill/{congress}/{billType}/{billNumber}/actions`
- **Bill Amendments:** `congress-gov://bill/{congress}/{billType}/{billNumber}/amendments`
- **Bill Committees:** `congress-gov://bill/{congress}/{billType}/{billNumber}/committees`
- **Bill Cosponsors:** `congress-gov://bill/{congress}/{billType}/{billNumber}/cosponsors`
- **Bill Related Bills:** `congress-gov://bill/{congress}/{billType}/{billNumber}/relatedbills`
- **Bill Subjects:** `congress-gov://bill/{congress}/{billType}/{billNumber}/subjects`
- **Bill Summaries:** `congress-gov://bill/{congress}/{billType}/{billNumber}/summaries`
- **Bill Text:** `congress-gov://bill/{congress}/{billType}/{billNumber}/text`
- **Bill Titles:** `congress-gov://bill/{congress}/{billType}/{billNumber}/titles`

#### Amendments and Amendment Subresources

- **Amendment Details:** `congress-gov://amendment/{congress}/{amendmentType}/{amendmentNumber}`
- **Amendment Actions:** `congress-gov://amendment/{congress}/{amendmentType}/{amendmentNumber}/actions`
- **Amendment Cosponsors:** `congress-gov://amendment/{congress}/{amendmentType}/{amendmentNumber}/cosponsors`
- **Amendment Amendments:** `congress-gov://amendment/{congress}/{amendmentType}/{amendmentNumber}/amendments`
- **Amendment Text:** `congress-gov://amendment/{congress}/{amendmentType}/{amendmentNumber}/text`

#### Members and Member Subresources

- **Member Details:** `congress-gov://member/{memberId}`
- **Member Sponsored Legislation:** `congress-gov://member/{bioguideId}/sponsored-legislation`
- **Member Cosponsored Legislation:** `congress-gov://member/{bioguideId}/cosponsored-legislation`
- **Members by State:** `congress-gov://member/state/{stateCode}`
- **Members by District:** `congress-gov://member/state/{stateCode}/district/{district}`
- **Members by Congress/State/District:** `congress-gov://member/congress/{congress}/state/{stateCode}/district/{district}`

#### Committees and Committee Subresources

- **Committee Details:** `congress-gov://committee/{chamber}/{committeeCode}`
- **Committee Bills:** `congress-gov://committee/{chamber}/{committeeCode}/bills`
- **Committee Reports:** `congress-gov://committee/{chamber}/{committeeCode}/reports`
- **Committee Nominations:** `congress-gov://committee/{chamber}/{committeeCode}/nominations`
- **Committee House Communications:** `congress-gov://committee/{chamber}/{committeeCode}/house-communication`
- **Committee Senate Communications:** `congress-gov://committee/{chamber}/{committeeCode}/senate-communication`

#### Nominations and Nomination Subresources

- **Nomination Details:** `congress-gov://nomination/{congress}/{nominationNumber}`
- **Individual Nominee:** `congress-gov://nomination/{congress}/{nominationNumber}/nominee/{ordinal}`
- **Nomination Actions:** `congress-gov://nomination/{congress}/{nominationNumber}/actions`
- **Nomination Committees:** `congress-gov://nomination/{congress}/{nominationNumber}/committees`
- **Nomination Hearings:** `congress-gov://nomination/{congress}/{nominationNumber}/hearings`

#### Congressional Record

- **Congressional Record:** `congress-gov://congressional-record`
- **Daily Congressional Record:** `congress-gov://daily-congressional-record/{volumeNumber}/{issueNumber}`
- **Daily Record Articles:** `congress-gov://daily-congressional-record/{volumeNumber}/{issueNumber}/articles`
- **Bound Congressional Record:** `congress-gov://bound-congressional-record/{year}/{month}/{day}`

#### Communications

- **House Communication:** `congress-gov://house-communication/{congress}/{communicationType}/{communicationNumber}`
- **Senate Communication:** `congress-gov://senate-communication/{congress}/{communicationType}/{communicationNumber}`
- **House Requirement:** `congress-gov://house-requirement/{requirementNumber}`
- **House Requirement Matching Communications:** `congress-gov://house-requirement/{requirementNumber}/matching-communications`

#### Treaties and Treaty Subresources

- **Treaty Details:** `congress-gov://treaty/{congress}/{treatyNumber}`
- **Treaty with Suffix:** `congress-gov://treaty/{congress}/{treatyNumber}/suffix/{treatySuffix}`
- **Treaty Actions:** `congress-gov://treaty/{congress}/{treatyNumber}/actions`
- **Treaty Committees:** `congress-gov://treaty/{congress}/{treatyNumber}/committees`

#### Committee Documents

- **Committee Report:** `congress-gov://committee-report/{congress}/{reportType}/{reportNumber}`
- **Committee Report Text:** `congress-gov://committee-report/{congress}/{reportType}/{reportNumber}/text`
- **Committee Print:** `congress-gov://committee-print/{congress}/{chamber}/{jacketNumber}`
- **Committee Print Text:** `congress-gov://committee-print/{congress}/{chamber}/{jacketNumber}/text`
- **Committee Meeting:** `congress-gov://committee-meeting/{congress}/{chamber}/{eventId}`
- **Committee Hearing:** `congress-gov://hearing/{congress}/{chamber}/{jacketNumber}`

#### Laws and Summaries

- **Law Details:** `congress-gov://law/{congress}/{lawType}/{lawNumber}`
- **Laws by Congress and Type:** `congress-gov://law/{congress}/{lawType}`
- **Laws by Congress:** `congress-gov://law/{congress}`
- **CRS Reports:** `congress-gov://crsreport/{reportNumber}`
- **Bill Summaries:** `congress-gov://summaries/{congress}/{billType}`

#### House Votes (Beta)

- **House Vote:** `congress-gov://house-vote/{congress}/{session}/{voteNumber}`
- **House Vote Members:** `congress-gov://house-vote/{congress}/{session}/{voteNumber}/members`

#### General Information

- **API Overview:** `congress-gov://info/overview`
- **Current Congress:** `congress-gov://info/current-congress`
- **Congress Details:** `congress-gov://congress/{congress}`

## Resource Examples

- **Get Bill H.R. 3076 (117th Congress):**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://bill/117/hr/3076</uri>
  </access_mcp_resource>
  ```

- **Get Member Pelosi:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://member/P000197</uri>
  </access_mcp_resource>
  ```

- **Get House Judiciary Committee Bills:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://committee/house/hsju00/bills</uri>
  </access_mcp_resource>
  ```

- **Get Presidential Nomination:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://nomination/118/123</uri>
  </access_mcp_resource>
  ```

- **Get Daily Congressional Record:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://daily-congressional-record/169/123</uri>
  </access_mcp_resource>
  ```

- **Get Info about 118th Congress:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://congress/118</uri>
  </access_mcp_resource>
  ```

- **Get API Overview:**

  ```
  <access_mcp_resource>
  <server_name>congress-server</server_name>
  <uri>congress-gov://info/overview</uri>
  </access_mcp_resource>
  ```

### Using Tools

Use the `use_mcp_tool` command/method.

**!!! CRITICAL TOOL WORKFLOW: Finding Entities & Getting Related Data !!!**

Many common tasks require a **mandatory two-step process** using both tools:

1. **STEP 1: Find the Entity ID using `congress_search`**

   - **Purpose:** Locate the specific bill, member, committee, etc., you need and extract its unique identifier(s) (e.g., `memberId`, or the `congress`, `billType`, `billNumber` for a bill URI).
   - **Tool:** `congress_search`
   - **Example:** Find member "John Kennedy" (might return multiple results requiring selection):

     ```xml
     <use_mcp_tool>
       <server_name>congress-server</server_name>
       <tool_name>congress_search</tool_name>
       <arguments>
         {
           "collection": "member",
           "query": "John Kennedy"
         }
       </arguments>
     </use_mcp_tool>
     ```

   - **Output:** Look for the `memberId` (e.g., `K000393`) or other necessary identifiers in the results.
   - **!!! WARNING !!!** Searching might return multiple results. You **MUST** identify the correct entity and use its specific ID for the next step.
   - **!!! API LIMITATION !!!** Filtering general searches by `congress` using the `filters` parameter is **NOT SUPPORTED** by the underlying API (e.g., for `/v3/bill` or `/v3/member`) and will be ignored. Congress-specific filtering usually requires using specific API paths (e.g., `/v3/bill/117`), which this tool does not construct.

2. **STEP 2: Get Related Data using `congress_getSubResource`**

   - **Purpose:** Use the identifier(s) found in Step 1 to construct the `parentUri` and fetch related details (actions, sponsors, text, etc.).
   - **Tool:** `congress_getSubResource`
   - **Prerequisite:** You **MUST** have the correct `parentUri` (e.g., `congress-gov://member/K000393`) from Step 1.
   - **Example:** Get legislation sponsored by member `K000393`:

     ```xml
     <use_mcp_tool>
       <server_name>congress-server</server_name>
       <tool_name>congress_getSubResource</tool_name>
       <arguments>
         {
           "parentUri": "congress-gov://member/K000393",
           "subResource": "sponsored-legislation",
           "limit": 5
         }
       </arguments>
     </use_mcp_tool>
     ```

   - **!!! GUARANTEED ERROR WARNING !!!** You **MUST** use a `subResource` string that is **STRICTLY VALID** for the `parentUri` type (e.g., `'sponsored-legislation'` for members, `'actions'` for bills). Providing an invalid combination **WILL** cause an error. Check the tool description for valid combinations.

**Following this two-step process is ESSENTIAL for reliably getting related information.**

**Tool Examples:**

- **Search for Bills containing "climate" (limit 5):**

  ```xml
  <use_mcp_tool>
  <server_name>congress-server</server_name>
  <tool_name>congress_search</tool_name>
  <arguments>
  {
    "collection": "bill",
    "query": "climate",
    "limit": 5
  }
  </arguments>
  </use_mcp_tool>
  ```

- **List Members (No Congress Filter Possible Here):**

  - _Note: As mentioned above, filtering by `congress` directly in `congress_search` is not supported by the API for the 'member' collection._

    ```xml
    <use_mcp_tool>
    <server_name>congress-server</server_name>
    <tool_name>congress_search</tool_name>
    <arguments>
    {
      "collection": "member",
      "limit": 10
      // Add "query" or other filters like "type" if needed
    }
    </arguments>
    </use_mcp_tool>
    ```

- **Get Actions for Bill H.R. 3076 (117th) (Requires URI from Search or Known Info):**

  ```xml
  <use_mcp_tool>
  <server_name>congress-server</server_name>
  <tool_name>congress_getSubResource</tool_name>
  <arguments>
  {
    "parentUri": "congress-gov://bill/117/hr/3076",
    "subResource": "actions",
    "limit": 10
  }
  </arguments>
  </use_mcp_tool>
  ```

- **Get Legislation Sponsored by Member P000197:**

  ```xml
  <use_mcp_tool>
  <server_name>congress-server</server_name>
  <tool_name>congress_getSubResource</tool_name>
  <arguments>
  {
    "parentUri": "congress-gov://member/P000197",
    "subResource": "sponsored-legislation",
    "limit": 5
  }
  </arguments>
  </use_mcp_tool>
  ```

## Linting and Formatting

- **Lint:** `npm run lint`
- **Format:** `npm run format`

Code will be automatically linted and formatted on commit via Husky and lint-staged.

## Project Management

**Linear Project:** [Congress API MCP Server](https://linear.app/rory-kronmiller/project/congress-api-mcp-server-252cd7eba8ae)

Track development progress, feature requests, and bug reports in the Linear project above.

## Swagger API Documentation

Full API spec can be found at: https://raw.githubusercontent.com/LibraryOfCongress/api.congress.gov/refs/heads/main/Documentation/swagger.json
